<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Micro Observer Demo</title>
  </head>
  <body>
    <h1>micro-observer demo</h1>
    <p>Open up the console and try making some changes to `data`.</p>
    <div style="display: flex; flex-basis: 40%;">
      <div style="flex-grow: 1;">
        <h3>Current State:</h3>
        <pre id="current-state"></pre>
      </div>
      <div style="flex-grow: 1; flex-basis: 40%;">
        <h3>Last Change</h3>
        <pre id="last-change"></pre>
      </div>
    </div>
    <script>let exports = window;</script>
    <script type="text/javascript" src="https://rawgit.com/tannerntannern/micro-observer/master/dist/observer.js"></script>
    <script>
      let recentChange;
      let __data = {
      	array: [1, 2, 3],
      	string: 'Hello there',
      	nested: {
      		array: ['a', 'b', 'c'],
      		person: {
      			name: 'Bob', age: '54'
      		}
      	}
      };
      function render() {
      	document.querySelector('#current-state').innerHTML = JSON.stringify(__data, null, 4);
      	document.querySelector('#last-change').innerHTML = JSON.stringify(recentChange, null, 4);
      }
      let data = Observer.create(__data, function(change) {
      	recentChange = change;
      	setTimeout(render, 50);
      	return true;
      });
      render();
    </script>
  </body>
</html>